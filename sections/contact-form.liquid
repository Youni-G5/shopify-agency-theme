<section class="contact-form-section section" data-section-id="{{ section.id }}">
  <div class="container" style="max-width: 800px;">
    {% if section.settings.heading != blank %}
      <h2 class="heading-lg text-center fade-in-up">{{ section.settings.heading }}</h2>
    {% endif %}

    {% if section.settings.subheading != blank %}
      <p class="text-center text-muted fade-in-up" style="margin-bottom: 3rem; font-size: 1.1rem;">
        {{ section.settings.subheading }}
      </p>
    {% endif %}

    <div class="contact-form-wrapper fade-in-up">
      {% form 'contact' %}
        {% if form.posted_successfully? %}
          <div class="form-success" style="background-color: #d1fae5; color: #065f46; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; text-align: center;">
            <p style="margin: 0;">{{ 'contact.form.post_success' | t }}</p>
          </div>
        {% endif %}

        {% if form.errors %}
          <div class="form-errors" style="background-color: #fee2e2; color: #991b1b; padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
            <p style="margin: 0 0 0.5rem 0; font-weight: 600;">{{ form.errors | default_errors }}</p>
          </div>
        {% endif %}

        <div class="form-row" style="display: grid; gap: 1.5rem; grid-template-columns: 1fr;">
          <div class="form-group">
            <label for="ContactForm-name" class="form-label">
              {{ 'contact.form.name' | t }} <span style="color: #dc2626;">*</span>
            </label>
            <input
              type="text"
              id="ContactForm-name"
              name="contact[{{ 'contact.form.name' | t }}]"
              class="form-input"
              value="{% if form[contact.form.name] %}{{ form[contact.form.name] }}{% endif %}"
              required
            >
          </div>

          <div class="form-group">
            <label for="ContactForm-email" class="form-label">
              {{ 'contact.form.email' | t }} <span style="color: #dc2626;">*</span>
            </label>
            <input
              type="email"
              id="ContactForm-email"
              name="contact[email]"
              class="form-input"
              value="{% if form.email %}{{ form.email }}{% endif %}"
              autocomplete="email"
              autocorrect="off"
              autocapitalize="off"
              required
            >
          </div>

          {% if section.settings.show_phone %}
            <div class="form-group">
              <label for="ContactForm-phone" class="form-label">
                {{ 'contact.form.phone' | t }}
              </label>
              <input
                type="tel"
                id="ContactForm-phone"
                name="contact[{{ 'contact.form.phone' | t }}]"
                class="form-input"
                value="{% if form[contact.form.phone] %}{{ form[contact.form.phone] }}{% endif %}"
                autocomplete="tel"
              >
            </div>
          {% endif %}

          {% if section.settings.show_company %}
            <div class="form-group">
              <label for="ContactForm-company" class="form-label">
                Entreprise
              </label>
              <input
                type="text"
                id="ContactForm-company"
                name="contact[Entreprise]"
                class="form-input"
              >
            </div>
          {% endif %}

          <div class="form-group">
            <label for="ContactForm-message" class="form-label">
              {{ 'contact.form.message' | t }} <span style="color: #dc2626;">*</span>
            </label>
            <textarea
              id="ContactForm-message"
              name="contact[body]"
              class="form-textarea"
              required
            >{% if form.body %}{{ form.body }}{% endif %}</textarea>
          </div>

          <div class="form-group">
            <button type="submit" class="btn btn-primary" style="width: 100%; font-size: 1.1rem;">
              {{ 'contact.form.send' | t }}
            </button>
          </div>
        </div>
      {% endform %}
    </div>
  </div>
</section>

<style>
  @media (min-width: 768px) {
    .form-row {
      grid-template-columns: repeat(2, 1fr) !important;
    }
    
    .form-group:nth-last-child(2),
    .form-group:last-child {
      grid-column: 1 / -1;
    }
  }
</style>

{% schema %}
{
  "name": "Contact Form",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Envoyez-nous un Message"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Remplissez le formulaire ci-dessous et nous vous répondrons dans les plus brefs délais"
    },
    {
      "type": "checkbox",
      "id": "show_phone",
      "label": "Show Phone Field",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_company",
      "label": "Show Company Field",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Contact Form"
    }
  ]
}
{% endschema %}
